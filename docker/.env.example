# Docker Compose Environment Variables
# Copy this file to .env and modify as needed
# cp .env.example .env

# Docker Build Configuration
# PIP index URL for Docker build (used during image building)
# Common mirror sources:
#   - Official: https://pypi.org/simple
#   - Aliyun (China): https://mirrors.aliyun.com/pypi/simple/
#   - Tsinghua (China): https://pypi.tuna.tsinghua.edu.cn/simple
PIP_INDEX_URL=https://pypi.org/simple

# Skip MinerU model download during Docker build (for Worker CPU image)
# Set to true to skip model download during build (saves build time and disk space)
# If skipped, models will be downloaded on first use at runtime from modelscope
# Note: MINERU_MODEL_SOURCE will be automatically set based on this parameter:
#   - false (default): Models downloaded during build → MINERU_MODEL_SOURCE=local
#   - true: Models skipped → MINERU_MODEL_SOURCE=modelscope (auto-configured)
# You don't need to manually set MINERU_MODEL_SOURCE, it's handled automatically
# Default: false (models will be downloaded during build)
SKIP_MODEL_DOWNLOAD=false

# Service Ports
# Redis port mapping (only used when using internal Redis service with redis profile)
# If port 6379 is already in use, change to another port (e.g., 6380)
# Note: This only affects the internal Redis service, not external Redis connections
REDIS_PORT=6379

# Redis Configuration
# Options:
#   1. Use internal Redis (with redis profile): redis://redis:6379/0
#   2. Use external Redis on host machine: redis://host.docker.internal:6379/0
#   3. Use external Redis with IP address: redis://192.168.1.100:6379/0
#   4. Use external Redis with password: redis://:password@host.docker.internal:6379/0
#   5. Use external Redis with authentication: redis://username:password@host.docker.internal:6379/0
# Note: This is used by docker-compose.yml to set REDIS_URL environment variable for containers
REDIS_URL=redis://redis:6379/0

# MinerU API port mapping
MINERU_API_PORT=8000

# MinerU Service Selection (Compose Profiles)
# Docker Compose will automatically start services based on profiles defined here
# 
# ===== 推荐配置（选择一种）=====
# 
# 方式 1: GPU Worker + 内部 Redis（默认值，需要 NVIDIA GPU）
# COMPOSE_PROFILES=redis,mineru-gpu
#
# 方式 2: CPU Worker + 内部 Redis（推荐开发环境）
# COMPOSE_PROFILES=redis,mineru-cpu
#
# ===== 使用外部 Redis =====
# 如果使用外部 Redis，不包含 redis profile
# COMPOSE_PROFILES=mineru-gpu
# COMPOSE_PROFILES=mineru-cpu
#
# ===== 说明 =====
# - mineru-api 服务没有 profile，会默认启动（必需）
# - mineru-cleanup 服务没有 profile，会默认启动（自动清理）
# - redis: 启用内部 Redis 服务（推荐）
# - mineru-cpu: 启用 CPU Worker
# - mineru-gpu: 启用 GPU Worker（需要 NVIDIA GPU）
#
# 配置后，直接运行: cd docker && docker compose up -d
COMPOSE_PROFILES=redis,mineru-gpu

# Cleanup Service Configuration
# mineru-cleanup service starts automatically (no profile, required service)
CLEANUP_INTERVAL_HOURS=24
CLEANUP_EXTRA_HOURS=2
